```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   DIAGNÃ“STICO FINAL: OVERFITTING EN XGBOOST               â•‘
â•‘                                                                            â•‘
â•‘                          ğŸ”´ SEVERO - ACCIÃ“N REQUERIDA                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“Š RESUMEN EJECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Tu modelo XGBoost estÃ¡ SOBREAJUSTANDO SEVERAMENTE:

â”Œâ”€ TRAIN SET (Datos de Entrenamiento) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… MAPE:       2.34%   â† Excelente, casi perfecto        â”‚
â”‚ âœ… MAE:     $6,090     â† Muy bajo                        â”‚
â”‚ âœ… RÂ²:        0.9947   â† Casi perfecta predicciÃ³n        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ TEST SET (Datos Nuevos) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ MAPE:       7.20%   â† Malo (3x peor)                  â”‚
â”‚ âŒ MAE:    $21,224     â† Alto (3.5x peor)                â”‚
â”‚ âŒ RÂ²:        0.9304   â† Bueno pero decae 6.4pp          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

              BRECHA TRAIN-TEST: 3.08x en MAPE
              
              Umbral Severo: > 2.5x
              Tu modelo:     3.08x  â† Â¡EXCEDE EL UMBRAL!


ğŸ“ˆ INDICADORES DE SOBREAJUSTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ERROR PORCENTUAL (MAPE)
   â”œâ”€ Train:  2.34%  âœ… Excelente
   â”œâ”€ Test:   7.20%  âŒ Malo
   â””â”€ Ratio:  3.08x  ğŸ”´ SEVERO

2. ERROR ABSOLUTO (MAE)
   â”œâ”€ Train:  $6,090   âœ… Bajo
   â”œâ”€ Test:   $21,224  âŒ Alto
   â””â”€ Ratio:  3.49x    ğŸ”´ SEVERO

3. ERROR CUADRÃTICO (RMSE)
   â”œâ”€ Train:  $8,586    âœ… Bajo
   â”œâ”€ Test:   $35,901   âŒ Alto
   â””â”€ Ratio:  4.18x     ğŸ”´ SEVERO

4. COEFICIENTE DE DETERMINACIÃ“N (RÂ²)
   â”œâ”€ Train:  0.9947   âœ… Casi perfecto
   â”œâ”€ Test:   0.9304   âœ… Bueno pero decae
   â””â”€ Gap:    -0.0643  ğŸŸ¡ MODERADO


ğŸ” ANÃLISIS DE RESIDUOS (SOSPECHA DE RUIDO APRENDIDO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ASIMETRÃA (SKEWNESS) - Â¿Predice consistentemente alto o bajo?
â”œâ”€ Train:  0.465  â† SimÃ©trico (bien)
â”œâ”€ Test:   1.203  â† Sesgado positivo (problema)
â””â”€ Cambio: 2.6x   â† Los residuos cambian de distribuciÃ³n
                     El modelo aprende patrones train-especÃ­ficos

CURTOSIS (KURTOSIS) - Â¿QuÃ© tan extremos son los errores?
â”œâ”€ Train:  6.97   â† Moderados outliers
â”œâ”€ Test:   12.77  â† MUCHOS outliers (colas pesadas)
â””â”€ Cambio: 1.8x   â† Test tiene errores mÃ¡s extremos
                     El modelo no captura casos excepcionales


ğŸ¯ DIAGNÃ“STICO: Â¿POR QUÃ‰ PASA ESTO?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CULPABLE PRINCIPAL: n_estimators = 1800

  1800 Ã¡rboles
     â†“
  Con learning_rate = 0.025 (aprendizaje lento)
     â†“
  Total de capacidad: 1800 Ã— 0.025 â‰ˆ 45 unidades de "fuerza"
     â†“
  Â¡DEMASIADA CAPACIDAD para 1460 casos de training!
     â†“
  El modelo memoriza INCLUSO EL RUIDO
     â†“
  Train MAPE = 2.34% (incluyendo ruido aprendido)
  Test MAPE  = 7.20% (el ruido no estÃ¡ en test)
     â†“
  ğŸ”´ SOBREAJUSTE SEVERO


ğŸ”§ HIPERPARÃMETROS ACTUALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ Bien Calibrados â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… max_depth: 5              â†’ Ãrboles bajos
â”‚ âœ… learning_rate: 0.025      â†’ Aprendizaje controlado
â”‚ âœ… min_child_weight: 10      â†’ Evita overfitting
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Problemas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  n_estimators: 1800       â†’ DEMASIADOS
â”‚ âš ï¸  reg_lambda: 2.0          â†’ RegularizaciÃ³n dÃ©bil
â”‚ âš ï¸  subsample: 0.7           â†’ No hay variancia
â”‚ âŒ reg_alpha: 0.0            â†’ Sin penalizaciÃ³n L1
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ’¡ SOLUCIONES (3 OPCIONES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¥‡ OPCIÃ“N 1: EARLY STOPPING AGRESIVO (RECOMENDADA)
   â”œâ”€ Tiempo: 5 minutos
   â”œâ”€ Complejidad: â­ Muy fÃ¡cil
   â”œâ”€ AcciÃ³n: Ejecutar tu script train_xgb_es.py con patience=50
   â”‚
   â”‚  $ PYTHONPATH=. python3 src/train_xgb_es.py \
   â”‚      --csv data/raw/df_final_regresion.csv \
   â”‚      --target SalePrice_Present \
   â”‚      --outdir models/xgb/test_early50 \
   â”‚      --log_target \
   â”‚      --patience 50
   â”‚
   â”œâ”€ QuÃ© pasa:
   â”‚  â€¢ El modelo entrena pero se detiene cuando no mejora
   â”‚  â€¢ 50 rondas sin mejora = parar temprano
   â”‚  â€¢ Usa la mejor iteraciÃ³n encontrada
   â”‚
   â”œâ”€ Resultado esperado:
   â”‚  â€¢ MAPE test: 6.0-6.5% (vs actual 7.2%)
   â”‚  â€¢ Mejora: ~10-15%
   â”‚
   â””â”€ Â¿Por quÃ© funciona?
      Previene que el modelo siga aprendiendo ruido


ğŸ¥ˆ OPCIÃ“N 2: REDUCIR COMPLEJIDAD + AUMENTAR REGULARIZACIÃ“N
   â”œâ”€ Tiempo: 15 minutos
   â”œâ”€ Complejidad: â­â­ FÃ¡cil
   â”œâ”€ Cambios necesarios:
   â”‚
   â”‚  "n_estimators": 800           (de 1800)
   â”‚  "reg_lambda": 4.0             (de 2.0)
   â”‚  "reg_alpha": 1.0              (de 0.0, agregar)
   â”‚  "subsample": 0.6              (de 0.7)
   â”‚  "colsample_bytree": 0.6       (de 0.7)
   â”‚
   â”œâ”€ Resultado esperado:
   â”‚  â€¢ MAPE test: 5.5-6.0%
   â”‚  â€¢ Mejora: ~15-25%
   â”‚
   â””â”€ Â¿Por quÃ© funciona?
      Menos Ã¡rboles + mÃ¡s penalizaciÃ³n = menos capacidad de memorizar


ğŸ¥‰ OPCIÃ“N 3: GRID SEARCH + CROSS-VALIDATION (Ã“PTIMA)
   â”œâ”€ Tiempo: 2 horas
   â”œâ”€ Complejidad: â­â­â­ Moderada
   â”œâ”€ Resultado esperado:
   â”‚  â€¢ MAPE test: 5.0-5.5%
   â”‚  â€¢ Mejora: ~25-30%
   â”‚
   â””â”€ Â¿Por quÃ© funciona?
      Prueba automÃ¡ticamente todas las combinaciones Ã³ptimas


ğŸ“Š COMPARATIVA DE SOLUCIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpciÃ³n    Tiempo    Mejora MAPE    Complejidad    RecomendaciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Actual    -         7.20%          Medio          âŒ Malo

1 (Early50)  5min   6.0-6.5%       â­ Muy fÃ¡cil    ğŸ‘ˆ PRIMERO
2 (Reduced)  15min  5.5-6.0%       â­â­ FÃ¡cil      ğŸ“Œ Si opciÃ³n 1 insuficiente
3 (Grid)     2hrs   5.0-5.5%       â­â­â­ Moderada âœ… Si quieres lo mejor


âœ… PLAN DE ACCIÃ“N RECOMENDADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FASE 1: HOY - OpciÃ³n 1 (5 minutos)
â”œâ”€ Ejecutar: src/train_xgb_es.py con patience=50
â”œâ”€ Validar: Comparar MAPE test antes vs despuÃ©s
â””â”€ Resultado:
   â””â”€ âœ… Si MAPE < 6.0% â†’ LISTO, problema resuelto
   â””â”€ âš ï¸  Si MAPE â‰¥ 6.0% â†’ Pasar a Fase 2

FASE 2: SI NECESARIO - OpciÃ³n 2 (15 minutos)
â”œâ”€ Reducir n_estimators de 1800 a 800
â”œâ”€ Aumentar reg_lambda de 2.0 a 4.0
â”œâ”€ Agregar reg_alpha: 1.0
â””â”€ Resultado:
   â””â”€ âœ… Si MAPE < 5.5% â†’ Problema resuelto
   â””â”€ âš ï¸  Si MAPE â‰¥ 5.5% â†’ Pasar a Fase 3

FASE 3: SI QUIERES EXCELENCIA - OpciÃ³n 3 (2 horas)
â”œâ”€ Ejecutar Grid Search
â”œâ”€ Encontrar combinaciÃ³n Ã³ptima automÃ¡ticamente
â””â”€ Resultado:
   â””â”€ âœ… MAPE < 5.5% â†’ Modelo optimizado


ğŸ“ˆ MÃ‰TRICAS OBJETIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MÃ‰TRICA              ACTUAL      OBJETIVO    ALCANZABLE?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MAPE Test            7.20%       < 6.0%      âœ… SÃ (OpciÃ³n 1)
MAE Test             $21,224     < $18,000   âœ… SÃ (OpciÃ³n 2)
Ratio MAPE           3.08x       < 2.0x      âœ… SÃ (OpciÃ³n 2-3)
RÂ² Test              0.9304      > 0.94      âš ï¸  DifÃ­cil


ğŸ“š ARCHIVOS RELEVANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AnÃ¡lisis TÃ©cnico:
â””â”€ ANALISIS_OVERFITTING_XGBOOST.md
   â”œâ”€ Detalles completos del anÃ¡lisis
   â”œâ”€ InterpretaciÃ³n de mÃ©tricas
   â””â”€ JustificaciÃ³n de hiperparÃ¡metros

Plan de AcciÃ³n:
â””â”€ RESUMEN_OVERFITTING_Y_SOLUCIONES.md
   â”œâ”€ 3 soluciones paso a paso
   â”œâ”€ Comandos listos para ejecutar
   â””â”€ Resultados esperados por opciÃ³n

GuÃ­a PrÃ¡ctica:
â””â”€ GUIA_PRACTICA_OVERFITTING.md
   â”œâ”€ Instrucciones simples
   â”œâ”€ Scripts para copiar y pegar
   â””â”€ Checklist de implementaciÃ³n

Scripts:
â”œâ”€ scripts/analizar_overfitting.py
â”‚  â””â”€ AnÃ¡lisis automÃ¡tico del sobreajuste
â”œâ”€ scripts/test_solucion_1.sh
â”‚  â””â”€ Early stopping agresivo
â””â”€ src/train_xgb_es.py
   â””â”€ Training con validaciÃ³n interna

GrÃ¡ficos Generados:
â”œâ”€ analisis/overfitting_analisis.png
â”‚  â””â”€ 4 grÃ¡ficos de diagnÃ³stico
â””â”€ analisis/deterioro_metricas.png
   â””â”€ ComparaciÃ³n visual de deterioro


ğŸ¯ CONCLUSIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… TU MODELO ESTÃ SOBREAJUSTANDO SEVERAMENTE

ğŸ“Š Evidencia: MAPE test es 3.08x peor que MAPE train

ğŸ”§ Causa: n_estimators=1800 da demasiada capacidad

ğŸ’¡ SoluciÃ³n: Comienza con Early Stopping (5 minutos)
            Si insuficiente, reduce complejidad (15 minutos)
            Si quieres lo mejor, Grid Search (2 horas)

ğŸ“ˆ Resultado esperado: MAPE test de 6.0-6.5% (mejora de 10-15%)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Fecha del anÃ¡lisis: 18 de noviembre de 2025
Modelo analizado: models/xgb/completa_present_log_p2_1800_ELEGIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
